<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Immo Bot Luxembourg ‚Äî Dashboard</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f172a">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Immo Bot LU">
<link rel="apple-touch-icon" href="icon.svg">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.datatables.net/1.13.8/css/dataTables.bootstrap5.min.css" rel="stylesheet">
<style>
:root { --bg: #f1f5f9; }
* { box-sizing: border-box; }
body { background: var(--bg); font-size: .875rem; font-family: "Segoe UI", system-ui, sans-serif; }

/* Navbar */
.top-nav { background: #0f172a; height: 54px; display: flex; align-items: center;
  padding: 0 1.25rem; gap: 1rem; position: sticky; top: 0; z-index: 100;
  box-shadow: 0 2px 8px rgba(0,0,0,.4); }
.top-nav .brand { color: #fff; font-weight: 700; font-size: 1rem; text-decoration: none; }
.top-nav .upd { color: #64748b; font-size: .75rem; margin-left: auto; }
.top-nav .map-btn { background: #3b82f6; color: #fff; border: none; border-radius: 6px;
  padding: .3rem .85rem; font-size: .8rem; font-weight: 600; text-decoration: none;
  transition: background .15s; }
.top-nav .map-btn:hover { background: #2563eb; color: #fff; }

/* KPI cards */
.kpi { border: none; border-left: 4px solid var(--c, #3b82f6);
  box-shadow: 0 1px 3px rgba(0,0,0,.08); border-radius: 10px; background: #fff;
  padding: 1rem 1.1rem; position: relative; overflow: hidden; }
.kpi .val { font-size: 1.65rem; font-weight: 800; color: #0f172a; line-height: 1.15; }
.kpi .lbl { font-size: .68rem; text-transform: uppercase; letter-spacing: .07em;
  color: #94a3b8; margin-top: .2rem; }
.kpi .ico { position: absolute; right: .9rem; top: .75rem;
  font-size: 2rem; opacity: .1; line-height: 1; }
.kpi .sub { font-size: .72rem; color: #64748b; margin-top: .25rem; }

/* Cartes g√©n√©riques */
.card { border: none; box-shadow: 0 1px 3px rgba(0,0,0,.08); border-radius: 10px; }
.card-header { background: transparent; border-bottom: 1px solid #f1f5f9;
  font-size: .75rem; font-weight: 700; text-transform: uppercase;
  letter-spacing: .06em; color: #64748b; padding: .75rem 1rem; }

/* Tableau */
table.dataTable thead th {
  font-size: .7rem; text-transform: uppercase; letter-spacing: .05em;
  background: #1e293b !important; color: #94a3b8 !important;
  border-color: #334155 !important; white-space: nowrap;
}
table.dataTable tbody tr:hover td { background: #eff6ff !important; }
table.dataTable tbody td { vertical-align: middle; padding: .45rem .6rem; }
.al { color: #3b82f6; text-decoration: none; font-weight: 500; }
.al:hover { text-decoration: underline; }
.pm2 { font-size: .7rem; color: #94a3b8; }
.sb { font-size: .68rem; border-radius: 5px; padding: .15em .55em;
  font-weight: 700; color: #fff; white-space: nowrap; }
.dbadge { border-radius: 5px; padding: .1em .5em; font-size: .68rem;
  font-weight: 700; color: #fff; white-space: nowrap; }

/* Filtres */
.filter-lbl { font-size: .68rem; font-weight: 700; text-transform: uppercase;
  letter-spacing: .06em; color: #64748b; margin-bottom: .2rem; }

/* Info bar */
.info-bar { display: flex; flex-wrap: wrap; align-items: center; gap: .5rem;
  font-size: .8rem; color: #64748b; margin-bottom: .75rem; }
.info-bar strong { color: #0f172a; }
</style>
</head>
<body>

<nav class="top-nav">
  <a href="#" class="brand">üè† Immo Bot Luxembourg</a>
  <span class="upd">Mis √† jour : 21/02/2026 13:13</span>
  <a href="map.html" class="map-btn">üó∫Ô∏è Carte (56)</a>
</nav>

<div class="container-fluid px-3 px-md-4 py-3">

<!-- ‚îÄ‚îÄ KPI ‚îÄ‚îÄ -->
<div class="row g-3 mb-3">
  <div class="col-6 col-md-2">
    <div class="kpi" style="--c:#3b82f6">
      <span class="ico">üìã</span>
      <div class="val">56</div>
      <div class="lbl">Annonces</div>
      <div class="sub">55 notifi√©es</div>
    </div>
  </div>
  <div class="col-6 col-md-2">
    <div class="kpi" style="--c:#10b981">
      <span class="ico">üí∞</span>
      <div class="val">2‚ÄØ419 ‚Ç¨</div>
      <div class="lbl">Prix moyen</div>
    </div>
  </div>
  <div class="col-6 col-md-2">
    <div class="kpi" style="--c:#06b6d4">
      <span class="ico">‚¨áÔ∏è</span>
      <div class="val">1‚ÄØ750 ‚Ç¨</div>
      <div class="lbl">Prix min</div>
    </div>
  </div>
  <div class="col-6 col-md-2">
    <div class="kpi" style="--c:#f59e0b">
      <span class="ico">‚¨ÜÔ∏è</span>
      <div class="val">2‚ÄØ800 ‚Ç¨</div>
      <div class="lbl">Prix max</div>
    </div>
  </div>
  <div class="col-6 col-md-2">
    <div class="kpi" style="--c:#8b5cf6">
      <span class="ico">üìê</span>
      <div class="val">100 m¬≤</div>
      <div class="lbl">Surface moy.</div>
    </div>
  </div>
  <div class="col-6 col-md-2">
    <div class="kpi" style="--c:#ec4899">
      <span class="ico">üìä</span>
      <div class="val">24.9 ‚Ç¨</div>
      <div class="lbl">‚Ç¨/m¬≤ moyen</div>
    </div>
  </div>
</div>

<!-- ‚îÄ‚îÄ SITES INFO-BAR ‚îÄ‚îÄ -->
<div class="card mb-3 px-3 py-2" style="font-size:.8rem">
  <span class="text-secondary me-2" style="font-size:.68rem;font-weight:700;text-transform:uppercase;letter-spacing:.06em">Sites actifs :</span>
  <span class="sb" style="background:#3b82f6">Athome.lu 47</span> <span class="sb" style="background:#10b981">Immotop.lu 5</span> <span class="sb" style="background:#f59e0b">Nextimmo.lu 2</span> <span class="sb" style="background:#ef4444">VIVI.lu 2</span>
</div>

<!-- ‚îÄ‚îÄ QUALITE DONNEES ‚îÄ‚îÄ -->

<div class="card mb-3">
  <div class="card-header">Qualit√© des donn√©es par site</div>
  <div class="card-body p-0">
    <table class="table table-sm mb-0" style="font-size:.78rem">
      <thead style="background:#1e293b;color:#94a3b8">
        <tr><th>Site</th><th class="text-center">N</th>
            <th class="text-center">Images</th>
            <th class="text-center">Surface</th>
            <th class="text-center">GPS</th></tr>
      </thead>
      <tbody><tr><td><span class="sb" style="background:#3b82f6">Athome.lu</span></td><td class="text-center">47</td><td class="text-center">‚úÖ</td><td class="text-center">‚úÖ</td><td class="text-center">‚úÖ</td></tr><tr><td><span class="sb" style="background:#10b981">Immotop.lu</span></td><td class="text-center">5</td><td class="text-center">‚úÖ</td><td class="text-center"><span style="color:#ef4444">‚ö†Ô∏è 4</span></td><td class="text-center">‚úÖ</td></tr><tr><td><span class="sb" style="background:#f59e0b">Nextimmo.lu</span></td><td class="text-center">2</td><td class="text-center">‚úÖ</td><td class="text-center">‚úÖ</td><td class="text-center">‚úÖ</td></tr><tr><td><span class="sb" style="background:#ef4444">VIVI.lu</span></td><td class="text-center">2</td><td class="text-center">‚úÖ</td><td class="text-center">‚úÖ</td><td class="text-center">‚úÖ</td></tr></tbody>
    </table>
  </div>
</div>

<!-- ‚îÄ‚îÄ GRAPHIQUES ‚îÄ‚îÄ -->
<div class="row g-3 mb-3">
  <div class="col-md-4">
    <div class="card h-100">
      <div class="card-header">R√©partition par ville</div>
      <div class="card-body d-flex align-items-center justify-content-center" style="min-height:230px">
        <canvas id="cSites"></canvas>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card h-100">
      <div class="card-header d-flex align-items-center justify-content-between">
        <span>Top 10 villes</span>
        <span style="font-size:.65rem;font-weight:400;color:#94a3b8;text-transform:none;letter-spacing:0">
          Cliquer pour filtrer
        </span>
      </div>
      <div class="card-body d-flex align-items-center" style="min-height:230px">
        <canvas id="cCities" style="cursor:pointer"></canvas>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card h-100">
      <div class="card-header">Distribution des prix</div>
      <div class="card-body d-flex align-items-center" style="min-height:230px">
        <canvas id="cPrices"></canvas>
      </div>
    </div>
  </div>
</div>

<!-- ‚îÄ‚îÄ FILTRES ‚îÄ‚îÄ -->
<div class="card mb-3">
  <div class="card-body py-2">
    <div class="row g-2 align-items-end">
      <div class="col-6 col-md-2">
        <div class="filter-lbl">Site</div>
        <select id="f-site" class="form-select form-select-sm">
          <option value="">Tous</option>
          <option value="Athome.lu">Athome.lu</option>
<option value="Immotop.lu">Immotop.lu</option>
<option value="Nextimmo.lu">Nextimmo.lu</option>
<option value="VIVI.lu">VIVI.lu</option>
        </select>
      </div>
      <div class="col-6 col-md-2">
        <div class="filter-lbl">Ville</div>
        <select id="f-city" class="form-select form-select-sm">
          <option value="">Toutes</option>
          <option value="Belval">Belval</option>
<option value="Belvaux">Belvaux</option>
<option value="Bertrange">Bertrange</option>
<option value="Bettembourg">Bettembourg</option>
<option value="Bridel">Bridel</option>
<option value="Brouch (Mersch)">Brouch (Mersch)</option>
<option value="Contern">Contern</option>
<option value="Dudelange">Dudelange</option>
<option value="Esch-sur-Alzette">Esch-sur-Alzette</option>
<option value="Garnich">Garnich</option>
<option value="Helmsange">Helmsange</option>
<option value="Hesperange">Hesperange</option>
<option value="Howald">Howald</option>
<option value="Junglinster">Junglinster</option>
<option value="Luxembourg">Luxembourg</option>
<option value="Luxembourg-Belair">Luxembourg-Belair</option>
<option value="Luxembourg-Bonnevoie">Luxembourg-Bonnevoie</option>
<option value="Luxembourg-Centre ville">Luxembourg-Centre ville</option>
<option value="Luxembourg-Cessange">Luxembourg-Cessange</option>
<option value="Luxembourg-Dommeldange">Luxembourg-Dommeldange</option>
<option value="Luxembourg-Eich">Luxembourg-Eich</option>
<option value="Luxembourg-Gare">Luxembourg-Gare</option>
<option value="Luxembourg-Hollerich">Luxembourg-Hollerich</option>
<option value="Luxembourg-Kirchberg">Luxembourg-Kirchberg</option>
<option value="Luxembourg-Merl">Luxembourg-Merl</option>
<option value="Luxembourg-Muhlenbach">Luxembourg-Muhlenbach</option>
<option value="Luxembourg-Weimershof">Luxembourg-Weimershof</option>
<option value="Mamer">Mamer</option>
<option value="Niederanven">Niederanven</option>
<option value="Remich">Remich</option>
<option value="Roeser">Roeser</option>
<option value="Rollingen">Rollingen</option>
<option value="Sanem">Sanem</option>
<option value="Senningerberg">Senningerberg</option>
<option value="Sprinkange">Sprinkange</option>
<option value="Strassen">Strassen</option>
        </select>
      </div>
      <div class="col-3 col-md-1">
        <div class="filter-lbl">Prix min</div>
        <input id="f-pmin" type="number" class="form-control form-control-sm" placeholder="1000" step="100">
      </div>
      <div class="col-3 col-md-1">
        <div class="filter-lbl">Prix max</div>
        <input id="f-pmax" type="number" class="form-control form-control-sm" placeholder="3000" step="100">
      </div>
      <div class="col-3 col-md-1">
        <div class="filter-lbl">Surface min</div>
        <input id="f-smin" type="number" class="form-control form-control-sm" placeholder="0">
      </div>
      <div class="col-3 col-md-1">
        <div class="filter-lbl">Pi√®ces</div>
        <select id="f-rooms" class="form-select form-select-sm">
          <option value="">Toutes</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4+</option>
        </select>
      </div>
      <div class="col-12 col-md-auto d-flex gap-2">
        <button class="btn btn-sm" style="background:#3b82f6;color:#fff;font-weight:600"
                onclick="applyFilters()">Filtrer</button>
        <button class="btn btn-sm btn-outline-secondary" onclick="resetFilters()">Reset</button>
      </div>
      <div class="col-12 col-md-auto ms-auto d-flex align-items-center gap-2">
        <span class="text-muted small" id="cnt"></span>
        <button id="cmp-btn" class="btn btn-sm btn-warning" style="display:none"
                onclick="openCompare()">‚öñÔ∏è Comparer (<span id="cmp-n">0</span>)</button>
      </div>
    </div>
  </div>
</div>

<!-- ‚îÄ‚îÄ TABLEAU ‚îÄ‚îÄ -->
<div class="card mb-4" style="overflow-x:auto">
  <table id="tbl" class="table table-sm table-hover table-bordered mb-0" style="width:100%">
    <thead>
      <tr>
        <th style="width:32px"><input type="checkbox" id="chk-all" onchange="toggleAll(this)"></th>
        <th>Site</th>
        <th>Ville</th>
        <th>Prix ‚Ç¨</th>
        <th>m¬≤</th>
        <th>‚Ç¨/m¬≤</th>
        <th>Ch.</th>
        <th>Dist.</th>
        <th>Titre</th>
        <th>Date</th>
        <th>Dispo</th>
        <th>‚úâ</th>
      </tr>
    </thead>
    <tbody id="tbody"></tbody>
  </table>
</div>

</div><!-- /container -->

<!-- MODAL COMPARATEUR -->
<div class="modal fade" id="cmp-modal" tabindex="-1">
  <div class="modal-dialog modal-xl modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header" style="background:#0f172a;color:#fff">
        <h5 class="modal-title fw-bold">‚öñÔ∏è Comparateur d'annonces</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body p-2" id="cmp-body"></div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/dataTables.bootstrap5.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script>
const ALL = [{"id": 56, "listing_id": "athome_8971769", "site": "Athome.lu", "title": "APPARTEMENT DUPLEX SPACIEUX A LOUER\nGrand Rue, L-3394 Roeser\n1er √©tage", "city": "Roeser", "price": 2300, "rooms": 2, "surface": 94, "url": "https://www.athome.lu/location/appartement/roeser/id-8971769.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/9f/5e/88/80903c3d9418d5ce8655bc427127c17981989f36.jpg", "latitude": 49.5398355, "longitude": 6.1444186, "distance_km": 6.7, "created_at": "2026-02-21 12:13:35", "notified": 0, "available_from": null}, {"id": 55, "listing_id": "athome_8871303", "site": "Athome.lu", "title": "A Louer - Superbe Appartement Moderne et Lumineux - 2 Chambres - Bertr", "city": "Bertrange", "price": 2400, "rooms": 6, "surface": 86, "url": "https://www.athome.lu/location/appartement/bertrange/id-8871303.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/78/d5/78/2ad871c29d3d4586f3c60837acea95a5f8d45bd0.jpg", "latitude": 49.6106248, "longitude": 6.0502349, "distance_km": 6.2, "created_at": "2026-02-21 12:13:25", "notified": 1, "available_from": "Immediatement"}, {"id": 54, "listing_id": "athome_8986750", "site": "Athome.lu", "title": "******** √Ä louer ? Bel appartement 2 chambres √† Bertrange ********\n\nSi", "city": "Bertrange", "price": 2200, "rooms": 5, "surface": 108, "url": "https://www.athome.lu/location/duplex/bertrange/id-8986750.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/e7/02/98/2991b18fa276a8826dac96ea0692ca2c1e8fe656.jpg", "latitude": 49.6106248, "longitude": 6.0502349, "distance_km": 6.2, "created_at": "2026-02-21 12:13:15", "notified": 1, "available_from": "Immediatement"}, {"id": 53, "listing_id": "athome_8418678", "site": "Athome.lu", "title": "Magnifique appartement deux chambres situ√© au 3e √©tage d'un immeuble m", "city": "Luxembourg-Gare", "price": 2800, "rooms": 2, "surface": 115, "url": "https://www.athome.lu/location/appartement/luxembourg-gare/id-8418678.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/67/57/08/bb3efd36062ec4938b2b74a5718c7630832b588a.jpg", "latitude": 49.5998688, "longitude": 6.1317861, "distance_km": 0.2, "created_at": "2026-02-21 12:13:04", "notified": 1, "available_from": null}, {"id": 52, "listing_id": "athome_6534909", "site": "Athome.lu", "title": "***LOUE*** \n''active relocation luxembourg'' vous propose un fabuleux ", "city": "Luxembourg-Centre ville", "price": 2800, "rooms": 2, "surface": 96, "url": "https://www.athome.lu/location/duplex/luxembourg-centre-ville/id-6534909.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/df/6b/36/8ce48823fee704779389e7ff516afbc715b3e46a.jpg", "latitude": 49.6124029, "longitude": 6.129606799999999, "distance_km": 1.4, "created_at": "2026-02-21 12:12:54", "notified": 1, "available_from": null}, {"id": 51, "listing_id": "athome_8947910", "site": "Athome.lu", "title": "L'agence Luna Immo vous propose √† la location, un appartement enti√®rem", "city": "Dudelange", "price": 2450, "rooms": 3, "surface": 96, "url": "https://www.athome.lu/location/appartement/dudelange/id-8947910.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/6c/88/88/2340dee0d23ff39cc1652b71b32af39db7e9b1af.jpg", "latitude": 49.4801198, "longitude": 6.0821581, "distance_km": 13.8, "created_at": "2026-02-21 12:12:43", "notified": 1, "available_from": null}, {"id": 50, "listing_id": "athome_7829031", "site": "Athome.lu", "title": "Duplex, proche du centre-ville, acc√®s facile, proche des institutions ", "city": "Luxembourg-Eich", "price": 2500, "rooms": 2, "surface": 145, "url": "https://www.athome.lu/location/duplex/luxembourg-eich/id-7829031.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/72/67/77/80882b6fc4bac7779d5ab577891639bfae20bde2.jpg", "latitude": 49.6247615, "longitude": 6.1294726, "distance_km": 2.8, "created_at": "2026-02-21 12:12:33", "notified": 1, "available_from": null}, {"id": 49, "listing_id": "athome_1372622", "site": "Athome.lu", "title": "Appartement, meubl√©, dans quartier r√©sidentiel, acc√®s facile, living, ", "city": "Luxembourg-Belair", "price": 2500, "rooms": 2, "surface": 150, "url": "https://www.athome.lu/location/appartement/luxembourg-belair/id-1372622.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/ec/1f/41/366fb8bc50e57a8fd60c5a2ab9b1c33556f46a11.jpg", "latitude": 49.6155658, "longitude": 6.1028472, "distance_km": 2.8, "created_at": "2026-02-21 12:12:23", "notified": 1, "available_from": null}, {"id": 48, "listing_id": "athome_8931852", "site": "Athome.lu", "title": "D√âJ√Ä LOU√â --- ALREADY RENTED OUT\n\nVeuillez nous contacter pour plus de", "city": "Luxembourg-Gare", "price": 2450, "rooms": 2, "surface": 80, "url": "https://www.athome.lu/location/duplex/luxembourg-gare/id-8931852.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/c0/a4/88/6bc677455c2d9f998919a3fb7cb61d2c5c04f1f7.jpg", "latitude": 49.599092, "longitude": 6.132617, "distance_km": 0.2, "created_at": "2026-02-21 12:12:12", "notified": 1, "available_from": null}, {"id": 47, "listing_id": "athome_1719537", "site": "Athome.lu", "title": "Appartement, meubl√©, acc√®s facile, proche des institutions europ√©ennes", "city": "Senningerberg", "price": 2300, "rooms": 2, "surface": 100, "url": "https://www.athome.lu/location/appartement/senningerberg/id-1719537.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/1f/c3/a1/cf1d8f84859ab82a798b8e5806c572f6d4ce56cc.jpg", "latitude": 49.64983, "longitude": 6.22619, "distance_km": 8.6, "created_at": "2026-02-21 12:12:02", "notified": 1, "available_from": null}, {"id": 46, "listing_id": "athome_7981264", "site": "Athome.lu", "title": "Senningerberg - Proximit√© imm√©diate a√©roport & Kirchberg\r\n\r\nA louer ap", "city": "Senningerberg", "price": 1950, "rooms": 2, "surface": 90, "url": "https://www.athome.lu/location/appartement/senningerberg/id-7981264.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/0d/8c/97/77b1bcc76e0a4cd2db03b31a1bf017b68cfcdd8a.jpg", "latitude": 49.6508207, "longitude": 6.2352602, "distance_km": 9.2, "created_at": "2026-02-21 12:11:52", "notified": 1, "available_from": null}, {"id": 45, "listing_id": "athome_8841840", "site": "Athome.lu", "title": "****LOUE****\r\n\r\n\r\nCharmant appartement 3 chambres √† Howald\r\n\r\n\r\nEngel ", "city": "Howald", "price": 2550, "rooms": 3, "surface": 101, "url": "https://www.athome.lu/location/appartement/howald/id-8841840.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/07/ae/68/ca00ebcc4ab96738744b2af70205687339af015f.jpg", "latitude": 49.5837607, "longitude": 6.1424563, "distance_km": 1.9, "created_at": "2026-02-21 12:11:41", "notified": 1, "available_from": null}, {"id": 44, "listing_id": "athome_8937085", "site": "Athome.lu", "title": "Pour tous renseignements, contacter Julien Feld:\r\njulien.feld@kwluxemb", "city": "Bettembourg", "price": 2450, "rooms": 2, "surface": 125, "url": "https://www.athome.lu/location/appartement/bettembourg/id-8937085.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/d7/e5/88/111c322935c4effdc5a965f849a2779a3c6cae75.jpg", "latitude": 49.5176326, "longitude": 6.098749499999999, "distance_km": 9.5, "created_at": "2026-02-21 12:11:31", "notified": 1, "available_from": null}, {"id": 43, "listing_id": "athome_8992071", "site": "Athome.lu", "title": "A louer lumineux appartement deux chambres √† Sprinkange.\r\n\r\nCet appart", "city": "Sprinkange", "price": 2100, "rooms": 2, "surface": 90, "url": "https://www.athome.lu/location/appartement/sprinkange/id-8992071.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/74/53/98/73bdfb9997ddb38e2d54959a0ef4ab3767899c4c.jpg", "latitude": 49.5842339, "longitude": 5.9640686, "distance_km": 12.4, "created_at": "2026-02-21 12:11:20", "notified": 1, "available_from": null}, {"id": 42, "listing_id": "athome_8899871", "site": "Athome.lu", "title": "Superbe duplex de 98,43 m¬≤ situ√© √† Garnich, Luxembourg, est une opport", "city": "Garnich", "price": 2400, "rooms": 2, "surface": 98, "url": "https://www.athome.lu/location/duplex/garnich/id-8899871.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/f1/dc/78/82b954a51c01a57bd7721055aa33cb30aa093ebf.jpg", "latitude": 49.6174427, "longitude": 5.9512695, "distance_km": 13.3, "created_at": "2026-02-21 12:11:09", "notified": 1, "available_from": null}, {"id": 41, "listing_id": "athome_8669227", "site": "Athome.lu", "title": "Many Many a le plaisir de vous pr√©senter ce superbe appartement neuf 3", "city": "Luxembourg-Hollerich", "price": 2450, "rooms": 3, "surface": 90, "url": "https://www.athome.lu/location/appartement/luxembourg-hollerich/id-8669227.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/b2/84/48/40ff1716d2c9e71f7f609e28a5401b7e5fea33c4.jpg", "latitude": 49.5986098, "longitude": 6.1186307, "distance_km": 1.1, "created_at": "2026-02-21 12:10:59", "notified": 1, "available_from": null}, {"id": 40, "listing_id": "athome_8939499", "site": "Athome.lu", "title": "A louer bel appartement deux chambres √† Luxembourg-Kirchberg. \r\n\r\nCet ", "city": "Luxembourg-Kirchberg", "price": 2350, "rooms": 2, "surface": 87, "url": "https://www.athome.lu/location/appartement/luxembourg-kirchberg/id-8939499.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/be/76/88/4d34f5cc48598e3e09be12371199012ef7149df1.jpg", "latitude": 49.6251297, "longitude": 6.1426854, "distance_km": 2.9, "created_at": "2026-02-21 12:10:49", "notified": 1, "available_from": null}, {"id": 39, "listing_id": "athome_8971656", "site": "Athome.lu", "title": "Appartement de haut standing lumineux avec jardin privatif sis au rez-", "city": "Bridel", "price": 2100, "rooms": 3, "surface": 85, "url": "https://www.athome.lu/location/appartement/bridel/id-8971656.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/88/5e/88/e3ca35c5b9a392a2406acbd948168992e981453e.jpg", "latitude": 49.6576485, "longitude": 6.0817229, "distance_km": 7.4, "created_at": "2026-02-21 12:10:38", "notified": 1, "available_from": null}, {"id": 38, "listing_id": "athome_8991743", "site": "Athome.lu", "title": "***Avant toute demande de visite, veuillez svp au pr√©alable nous d√©cri", "city": "Luxembourg-Weimershof", "price": 2550, "rooms": 2, "surface": 90, "url": "https://www.athome.lu/location/appartement/luxembourg-weimershof/id-8991743.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/ff/33/98/929fcc85695a321fd4425cec92cc7b9577b6dfff.jpg", "latitude": 49.6209339, "longitude": 6.1609861, "distance_km": 3.0, "created_at": "2026-02-21 12:10:28", "notified": 1, "available_from": null}, {"id": 37, "listing_id": "nextimmo_12392", "site": "Nextimmo.lu", "title": "Appt Bridel ‚Äî 3 ch. ¬∑ 100 m¬≤ ¬∑ 2400 ‚Ç¨", "city": "Bridel", "price": 2400, "rooms": 3, "surface": 100, "url": "https://nextimmo.lu/en/details/12392", "image_url": "https://storage.nextimmo.lu/images/thumb/2f13c504dd31a84bb5bb855182ad8019/cc87f5f3695cbb1fbd67971c137f07a3.jpg", "latitude": 49.655, "longitude": 6.08, "distance_km": 7.3, "created_at": "2026-02-21 12:10:17", "notified": 1, "available_from": null}, {"id": 36, "listing_id": "athome_8992075", "site": "Athome.lu", "title": "SIMPLY Real Estate vous propose en exclusivit√© un charmant appartement", "city": "Luxembourg-Weimershof", "price": 2600, "rooms": 2, "surface": 96, "url": "https://www.athome.lu/location/appartement/luxembourg-weimershof/id-8992075.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/b4/53/98/7c87aa3315d5a1736566e27ab43d7f6856136dad.jpg", "latitude": 49.6209339, "longitude": 6.1609861, "distance_km": 3.0, "created_at": "2026-02-21 12:10:07", "notified": 1, "available_from": null}, {"id": 35, "listing_id": "athome_8976792", "site": "Athome.lu", "title": "Contact Direct : 691 744 110 - Sylvain LEMOINE\n\nIl y a des appartement", "city": "Strassen", "price": 2600, "rooms": 6, "surface": 94, "url": "https://www.athome.lu/location/appartement/strassen/id-8976792.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/89/9f/88/d706ce54a59452b2ee5345a1cec413ef3141c6e4.jpg", "latitude": 49.62125950000001, "longitude": 6.0646648, "distance_km": 5.5, "created_at": "2026-02-21 12:09:57", "notified": 1, "available_from": null}, {"id": 34, "listing_id": "athome_8974855", "site": "Athome.lu", "title": "Luxembourg Muhlenbach dans un r√©sidence de haut standing entour√©e de v", "city": "Luxembourg-Muhlenbach", "price": 2600, "rooms": 2, "surface": 105, "url": "https://www.athome.lu/location/appartement/luxembourg-muhlenbach/id-8974855.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/70/2f/88/3a432ea0d447d32e375855c6ef4ad5edacfc7b4f.jpg", "latitude": 49.6287422, "longitude": 6.1138499, "distance_km": 3.5, "created_at": "2026-02-21 12:09:46", "notified": 1, "available_from": null}, {"id": 33, "listing_id": "athome_8086234", "site": "Athome.lu", "title": "Many Many vous propose cet appartement de 98 m¬≤, situ√© au 2√®me √©tage d", "city": "Belval", "price": 2375, "rooms": 2, "surface": 98, "url": "https://www.athome.lu/location/appartement/belval/id-8086234.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/ad/26/b7/c6ba21ef8d4fb8c01706714b597e0e5ebe634661.jpg", "latitude": 49.5045503, "longitude": 5.9435467, "distance_km": 17.4, "created_at": "2026-02-21 12:09:36", "notified": 1, "available_from": null}, {"id": 32, "listing_id": "athome_8470343", "site": "Athome.lu", "title": "Many Many vous pr√©sente cet appartement meubl√© et traversant √† la d√©co", "city": "Luxembourg-Cessange", "price": 2500, "rooms": 4, "surface": 90, "url": "https://www.athome.lu/location/appartement/luxembourg-cessange/id-8470343.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/74/f3/18/732b915f5bf46271ead63c57d711f06decec9432.jpg", "latitude": 49.5872157, "longitude": 6.1061192, "distance_km": 2.5, "created_at": "2026-02-21 12:09:26", "notified": 1, "available_from": null}, {"id": 31, "listing_id": "athome_8898426", "site": "Athome.lu", "title": "ManyMany vous propose cet appartement lumineux situ√© dans la r√©sidence", "city": "Luxembourg-Muhlenbach", "price": 2200, "rooms": 4, "surface": 125, "url": "https://www.athome.lu/location/appartement/luxembourg-muhlenbach/id-8898426.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/a7/7c/78/3ce85c7acb7fa39cbe378a1612bb2c59759ed0b7.jpg", "latitude": 49.6315323, "longitude": 6.117433699999999, "distance_km": 3.7, "created_at": "2026-02-21 12:09:15", "notified": 1, "available_from": null}, {"id": 30, "listing_id": "athome_8948091", "site": "Athome.lu", "title": "Appartement moderne au 1ier √©tage pr√®s de tous commodit√©s sis 36 rue d", "city": "Luxembourg-Bonnevoie", "price": 2650, "rooms": 2, "surface": 80, "url": "https://www.athome.lu/location/appartement/luxembourg-bonnevoie/id-8948091.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/b7/98/88/58f59fe8de7228fd83178b95ce1e4acd53fb2110.jpg", "latitude": 49.6040151, "longitude": 6.1370979, "distance_km": 0.5, "created_at": "2026-02-21 12:09:05", "notified": 1, "available_from": null}, {"id": 29, "listing_id": "athome_8971727", "site": "Athome.lu", "title": "appartement lumineux sis au 2e √©tage d‚Äôune r√©sidence situ√©e √† proximit", "city": "Luxembourg-Belair", "price": 2650, "rooms": 6, "surface": 126, "url": "https://www.athome.lu/location/appartement/luxembourg-belair/id-8971727.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/fc/5e/88/be50e70120de26a47dfb0cf883260d0f38409485.jpg", "latitude": 49.6112239, "longitude": 6.1161102, "distance_km": 1.8, "created_at": "2026-02-21 12:08:54", "notified": 1, "available_from": null}, {"id": 28, "listing_id": "athome_8976000", "site": "Athome.lu", "title": "A louer, superbe appartement de 89 m2 avec 2 chambres √† coucher, parti", "city": "Bertrange", "price": 2300, "rooms": 2, "surface": 89, "url": "https://www.athome.lu/location/appartement/bertrange/id-8976000.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/08/6f/88/374fd614ebbb9f8e205f208abf2023e313bea25f.jpg", "latitude": 49.6024772, "longitude": 6.0732987, "distance_km": 4.4, "created_at": "2026-02-21 12:08:44", "notified": 1, "available_from": null}, {"id": 27, "listing_id": "athome_8114963", "site": "Athome.lu", "title": "Many Many vous propose ce bel appartement rez-de-Jardin de 81 m¬≤ situ√©", "city": "Luxembourg-Bonnevoie", "price": 2300, "rooms": 2, "surface": 81, "url": "https://www.athome.lu/location/appartement/luxembourg-bonnevoie/id-8114963.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/31/3d/b7/940914d6d9d4441357b32108c6e0633740f9a065.jpg", "latitude": 49.5923442, "longitude": 6.1441177, "distance_km": 1.1, "created_at": "2026-02-21 12:08:34", "notified": 1, "available_from": null}, {"id": 26, "listing_id": "athome_8221893", "site": "Athome.lu", "title": "++++COUP DE COEUR! FULLY FURNISHED COLOCATION POSSIBLE AVAILABLE 15.06", "city": "Esch-sur-Alzette", "price": 1750, "rooms": 2, "surface": 90, "url": "https://www.athome.lu/location/appartement/esch-sur-alzette/id-8221893.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/5c/47/d7/92e422cc79d59399f39ac56dc5979aecc11da1b0.jpg", "latitude": 49.4964624, "longitude": 5.9753139, "distance_km": 16.2, "created_at": "2026-02-21 12:08:24", "notified": 1, "available_from": null}, {"id": 25, "listing_id": "athome_8940704", "site": "Athome.lu", "title": "+352 621 71 28 77 bernard@mtinvest.lu\n\nMT Real Estate Invest vous prop", "city": "Luxembourg-Centre ville", "price": 2500, "rooms": 2, "surface": 110, "url": "https://www.athome.lu/location/appartement/luxembourg-centre-ville/id-8940704.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/0a/c6/88/02ed4322baf081e2aa40a663f81de0e2e2c67b06.jpg", "latitude": 49.6124883, "longitude": 6.126248899999999, "distance_km": 1.5, "created_at": "2026-02-21 12:08:13", "notified": 1, "available_from": null}, {"id": 24, "listing_id": "athome_7980446", "site": "Athome.lu", "title": "+++SHORT TERM COURT SEJOUR FULLY FURNISHED+++EUREKA REAL ESTATE vous p", "city": "Luxembourg-Kirchberg", "price": 2400, "rooms": 2, "surface": 80, "url": "https://www.athome.lu/location/appartement/luxembourg-kirchberg/id-7980446.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/e9/5c/97/c5fa1dd49494595330b46cf71d89d8d5_1.jpg", "latitude": 49.6278694, "longitude": 6.153422, "distance_km": 3.4, "created_at": "2026-02-21 12:08:03", "notified": 1, "available_from": null}, {"id": 23, "listing_id": "athome_8620128", "site": "Athome.lu", "title": "+++MERL+++DISPONIBLE 01.07.2026 COLOCATION POSSIBLE S SHORT TERM FULLY", "city": "Luxembourg-Merl", "price": 2620, "rooms": 2, "surface": 90, "url": "https://www.athome.lu/location/appartement/luxembourg-merl/id-8620128.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/06/88/38/2bee7cd4bf528a6fe2ae12543a2438094dcbaa1a.jpg", "latitude": 49.6020642, "longitude": 6.099047, "distance_km": 2.5, "created_at": "2026-02-21 12:07:52", "notified": 1, "available_from": "01/07/2026"}, {"id": 22, "listing_id": "athome_7840995", "site": "Athome.lu", "title": "+++COUP DE COEUR! SHORT TERM FULLY FURNISHED COLOCATION POSSIBLE+++EUR", "city": "Luxembourg-Dommeldange", "price": 2450, "rooms": 2, "surface": 110, "url": "https://www.athome.lu/location/penthouse/luxembourg-dommeldange/id-7840995.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/3e/4a/77/03530bf3ae8e63e30bf95e839c2f53f7_1.jpg", "latitude": 49.6391127, "longitude": 6.1376927, "distance_km": 4.4, "created_at": "2026-02-21 12:07:42", "notified": 1, "available_from": null}, {"id": 21, "listing_id": "athome_8984620", "site": "Athome.lu", "title": "Groupe Iris Immobilier S.A. est ravi de vous proposer ce bel apparteme", "city": "Belvaux", "price": 2050, "rooms": 5, "surface": 80, "url": "https://www.athome.lu/location/appartement/belvaux/id-8984620.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/c2/81/98/d7466ec9ea65a5e76a94fcd5c35e408db64ccd82.jpg", "latitude": 49.5044913, "longitude": 5.9418997, "distance_km": 17.5, "created_at": "2026-02-21 12:07:32", "notified": 1, "available_from": null}, {"id": 20, "listing_id": "athome_8994521", "site": "Athome.lu", "title": "appartement lumineux sis au rez-de-chauss√©e sur√©lev√© d‚Äôun petit immeub", "city": "Luxembourg-Belair", "price": 2250, "rooms": 5, "surface": 90, "url": "https://www.athome.lu/location/appartement/luxembourg-belair/id-8994521.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/9d/e3/98/70aaf992d392e7980c2297a413f46c2ef17d7993.jpg", "latitude": 49.6078954, "longitude": 6.1070622, "distance_km": 2.1, "created_at": "2026-02-21 12:07:21", "notified": 1, "available_from": null}, {"id": 19, "listing_id": "athome_8950242", "site": "Athome.lu", "title": "B IMMOBILIER MERL vous propose √† la location ce bel appartement meubl√©", "city": "Junglinster", "price": 2500, "rooms": 3, "surface": 99, "url": "https://www.athome.lu/location/appartement/junglinster/id-8950242.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/2e/19/88/07369ae46761ecb276237d48703541b908c688f3.jpg", "latitude": 49.7132351, "longitude": 6.2560204, "distance_km": 15.3, "created_at": "2026-02-21 12:07:11", "notified": 1, "available_from": null}, {"id": 18, "listing_id": "athome_8890838", "site": "Athome.lu", "title": "Bel appartement enti√®rement meubl√© avec grand balcon √† Strassen\nValora", "city": "Strassen", "price": 2650, "rooms": 2, "surface": 90, "url": "https://www.athome.lu/location/appartement/strassen/id-8890838.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/6d/9a/78/8eaf7473e89a565ffea5e7ccad865aa05f817e4a.jpg", "latitude": 49.6207211, "longitude": 6.052904900000001, "distance_km": 6.3, "created_at": "2026-02-21 12:07:01", "notified": 1, "available_from": null}, {"id": 17, "listing_id": "athome_8908362", "site": "Athome.lu", "title": "Castel immobilier propose √† la location ce magnifique appartement enti", "city": "Helmsange", "price": 2500, "rooms": 2, "surface": 83, "url": "https://www.athome.lu/location/appartement/helmsange/id-8908362.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/a4/ee/78/d5c07503a27a1e784ea124935803d45bff734ce4.jpg", "latitude": 49.6687138, "longitude": 6.1321495, "distance_km": 7.6, "created_at": "2026-02-21 12:06:50", "notified": 1, "available_from": null}, {"id": 16, "listing_id": "athome_8498529", "site": "Athome.lu", "title": "Tr√®s bel appartement situ√© dans une nouvelle r√©sidence avec seulement ", "city": "Remich", "price": 2500, "rooms": 4, "surface": 130, "url": "https://www.athome.lu/location/appartement/remich/id-8498529.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/16/da/18/c4aaaeced16c9b0215f4a59a3de2f42c894b8e8b.jpg", "latitude": 49.545017, "longitude": 6.3674222, "distance_km": 17.9, "created_at": "2026-02-21 12:06:40", "notified": 1, "available_from": null}, {"id": 15, "listing_id": "athome_7849957", "site": "Athome.lu", "title": "A louer, bel appartement de 90m2 avec 2 chambres √† Luxembourg-Belair.\n", "city": "Luxembourg-Belair", "price": 2700, "rooms": 2, "surface": 90, "url": "https://www.athome.lu/location/appartement/luxembourg-belair/id-7849957.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/5e/7c/77/eb71d72cdf4ff7490f337b3f18c05ab45f118126.jpg", "latitude": 49.6060922, "longitude": 6.1154686, "distance_km": 1.5, "created_at": "2026-02-21 12:06:29", "notified": 1, "available_from": null}, {"id": 14, "listing_id": "athome_8983034", "site": "Athome.lu", "title": "Spacieux appartement sis au rez-de-chauss√©e, dans une R√©sidence tr√®s s", "city": "Rollingen", "price": 2150, "rooms": 6, "surface": 100, "url": "https://www.athome.lu/location/appartement/rollingen/id-8983034.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/af/11/98/ab1c87677ef788d6e7ad0ce4f54d4c23f2e34d27.jpg", "latitude": 49.7402205, "longitude": 6.1137785, "distance_km": 15.7, "created_at": "2026-02-21 12:06:19", "notified": 1, "available_from": null}, {"id": 13, "listing_id": "athome_8982958", "site": "Athome.lu", "title": "Spacieux triplex en situation calme √† Brouch, offrant des espaces g√©n√©", "city": "Brouch (Mersch)", "price": 2400, "rooms": 3, "surface": 172, "url": "https://www.athome.lu/location/duplex/brouch-(mersch)/id-8982958.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/ea/11/98/e47d2a1a4ade5af900eb3117dff2dbe5bdea3912.jpg", "latitude": 49.7373735, "longitude": 6.0202389, "distance_km": 17.3, "created_at": "2026-02-21 12:06:09", "notified": 1, "available_from": null}, {"id": 12, "listing_id": "athome_8726425", "site": "Athome.lu", "title": "√Ä louer, magnifique appartement d'environ 80m2 avec deux chambres situ", "city": "Luxembourg-Kirchberg", "price": 2800, "rooms": 2, "surface": 80, "url": "https://www.athome.lu/location/appartement/luxembourg-kirchberg/id-8726425.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/99/72/58/f1f3daf50dd3bf963c6152123772f2b527581d51.jpg", "latitude": 49.6285462, "longitude": 6.1525617, "distance_km": 3.4, "created_at": "2026-02-21 12:05:58", "notified": 1, "available_from": null}, {"id": 11, "listing_id": "athome_8971722", "site": "Athome.lu", "title": "Lien vers visite virtuelle : https://tour.giraffe360.com/0b04f7ad1b0a4", "city": "Luxembourg-Centre Ville", "price": 2350, "rooms": 2, "surface": 93, "url": "https://www.athome.lu/location/appartement/luxembourg-centre-ville/id-8971722.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/ac/5e/88/30dac40163b1c819d361a8a48f0b8bfc4b43d3c0.jpg", "latitude": 49.6118458, "longitude": 6.126972500000001, "distance_km": 1.4, "created_at": "2026-02-21 12:05:48", "notified": 1, "available_from": "Immediatement"}, {"id": 10, "listing_id": "athome_8958851", "site": "Athome.lu", "title": "Situ√© dans le paisible village de Contern, dans une r√©sidence avec asc", "city": "Contern", "price": 2400, "rooms": 2, "surface": 82, "url": "https://www.athome.lu/location/appartement/contern/id-8958851.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/38/3b/88/7d2cbad6fbebd8f95da9a38f7c7868f66064786d.jpg", "latitude": 49.5854461, "longitude": 6.224731299999999, "distance_km": 6.7, "created_at": "2026-02-21 12:05:37", "notified": 1, "available_from": null}, {"id": 9, "listing_id": "athome_8993862", "site": "Athome.lu", "title": "D√©couvrez ce superbe appartement propos√© par House Invest Immobili√®re ", "city": "Luxembourg-Belair", "price": 2600, "rooms": 2, "surface": 95, "url": "https://www.athome.lu/location/appartement/luxembourg-belair/id-8993862.html", "image_url": "https://i1.static.athome.eu/images/annonces2/image_/64/c3/98/20c3b683f5ab12b161a3b8cd471af8934d9b5606.jpg", "latitude": 49.6100199, "longitude": 6.107134299999999, "distance_km": 2.2, "created_at": "2026-02-21 12:05:27", "notified": 1, "available_from": null}, {"id": 8, "listing_id": "vivi_210582", "site": "VIVI.lu", "title": "Appartement 2 chambres √† louer", "city": "Bertrange", "price": 2500, "rooms": 2, "surface": 91, "url": "https://www.vivi.lu/fr/propriete/lieu/appartement/bertrange/appartement-2-chambres-a-louer/210582", "image_url": "https://storage.vivi.lu/696/fb1/dcc7ef2_m.jpg", "latitude": 49.61, "longitude": 6.05, "distance_km": 6.2, "created_at": "2026-02-21 12:05:17", "notified": 1, "available_from": null}, {"id": 7, "listing_id": "vivi_209739", "site": "VIVI.lu", "title": "Appartement 2 chambres √† louer", "city": "Luxembourg", "price": 2000, "rooms": 2, "surface": 90, "url": "https://www.vivi.lu/fr/propriete/lieu/appartement/luxembourg/appartement-2-chambres-a-louer/209739", "image_url": "https://storage.vivi.lu/695/e4b/d1512ce_m.jpg", "latitude": 49.6116, "longitude": 6.1319, "distance_km": 1.3, "created_at": "2026-02-21 12:05:06", "notified": 1, "available_from": null}, {"id": 6, "listing_id": "immotop_1841761", "site": "Immotop.lu", "title": "Maison individuelle 140 m¬≤, Oberanven, Rameldange, Hostert, Niederanve", "city": "Niederanven", "price": 2800, "rooms": 0, "surface": 140, "url": "https://www.immotop.lu/annonces/1841761/", "image_url": "https://pic.immotop.lu/image/148329517/xxs-c.jpg", "latitude": 49.65, "longitude": 6.25, "distance_km": 10.0, "created_at": "2026-02-21 12:04:56", "notified": 1, "available_from": null}, {"id": 5, "listing_id": "immotop_1872303", "site": "Immotop.lu", "title": "Appartement 2 chambres 2, Rue Jean-Jacques Rousseau, Belval Sud-Lyc√©e,", "city": "Sanem", "price": 2050, "rooms": 2, "surface": 0, "url": "https://www.immotop.lu/annonces/1872303/", "image_url": "https://pic.immotop.lu/image/148775481/xxs-c.jpg", "latitude": 49.55, "longitude": 5.98, "distance_km": 12.4, "created_at": "2026-02-21 12:04:45", "notified": 1, "available_from": null}, {"id": 4, "listing_id": "immotop_1875587", "site": "Immotop.lu", "title": "Appartement 3 chambres 520, Route de Thionville, Alzingen, Hesperange", "city": "Hesperange", "price": 2800, "rooms": 3, "surface": 0, "url": "https://www.immotop.lu/annonces/1875587/", "image_url": "https://pic.immotop.lu/image/148819515/xxs-c.jpg", "latitude": 49.57, "longitude": 6.15, "distance_km": 3.5, "created_at": "2026-02-21 12:04:35", "notified": 1, "available_from": null}, {"id": 3, "listing_id": "immotop_1875939", "site": "Immotop.lu", "title": "Appartement 2 chambres rue Antoine Meyer, Hollerich, Luxembourg", "city": "Luxembourg", "price": 2200, "rooms": 2, "surface": 0, "url": "https://www.immotop.lu/annonces/1875939/", "image_url": "https://pic.immotop.lu/image/148823935/xxs-c.jpg", "latitude": 49.6116, "longitude": 6.1319, "distance_km": 1.3, "created_at": "2026-02-21 12:04:25", "notified": 1, "available_from": null}, {"id": 2, "listing_id": "nextimmo_86702812", "site": "Nextimmo.lu", "title": "Appt Mamer ‚Äî 2 ch. ¬∑ 81 m¬≤ ¬∑ 2000 ‚Ç¨", "city": "Mamer", "price": 2000, "rooms": 2, "surface": 81, "url": "https://nextimmo.lu/en/details/86702812", "image_url": "https://storage.nextimmo.lu/images/thumb/2a833593017dda86bf0860de48a0961b/019b2df3a74c610481781c00ff47a08b.jpg", "latitude": 49.62391, "longitude": 6.01063, "distance_km": 9.3, "created_at": "2026-02-21 12:04:14", "notified": 1, "available_from": null}, {"id": 1, "listing_id": "immotop_1844781", "site": "Immotop.lu", "title": "Appartement 2 chambres quatri√®me √©tage, Ville Haute, Luxembourg", "city": "Luxembourg", "price": 2750, "rooms": 2, "surface": 0, "url": "https://www.immotop.lu/annonces/1844781/", "image_url": "https://pic.immotop.lu/image/148365249/xxs-c.jpg", "latitude": 49.6116, "longitude": 6.1319, "distance_km": 1.3, "created_at": "2026-02-21 12:04:09", "notified": 1, "available_from": null}];
let filtered = [...ALL];
let cmpSet   = new Set();
let dt;

const SITE_COL = {
  'Athome.lu'   : '#3b82f6',
  'Immotop.lu'  : '#10b981',
  'Luxhome.lu'  : '#06b6d4',
  'VIVI.lu'     : '#f59e0b',
  'Nextimmo.lu' : '#8b5cf6',
  'Newimmo.lu'  : '#ef4444',
  'Unicorn.lu'  : '#64748b',
  'Remax.lu'    : '#ec4899',
  'Sigelux.lu'  : '#84cc16',
  'ImmoStar.lu' : '#f97316',
};

function fmt(n)    { return n != null ? Number(n).toLocaleString('fr-FR') : '‚Äî'; }
function trunc(s,n) { return s && s.length > n ? s.slice(0,n) + '‚Ä¶' : (s || '‚Äî'); }
function dCol(d)   {
  if (d == null) return '#94a3b8';
  return d < 2 ? '#10b981' : d < 5 ? '#3b82f6' : d < 10 ? '#f59e0b' : '#ef4444';
}

function render(data) {
  const tb = document.getElementById('tbody');
  tb.innerHTML = '';
  data.forEach(l => {
    const pm2  = (l.price > 0 && l.surface > 0) ? Math.round(l.price / l.surface * 10) / 10 : '';
    const dist = l.distance_km != null
      ? `<span class="dbadge" style="background:${dCol(l.distance_km)}">${l.distance_km.toFixed(1)} km</span>`
      : '<span style="color:#94a3b8">‚Äî</span>';
    const sc = SITE_COL[l.site] || '#64748b';
    const row = document.createElement('tr');
    row.innerHTML = `
      <td><input type="checkbox" class="cchk" value="${l.id}" onchange="togCmp(${l.id},this)"></td>
      <td><span class="sb" style="background:${sc}">${l.site || '‚Äî'}</span></td>
      <td>${l.city || '‚Äî'}</td>
      <td class="fw-bold">${l.price ? fmt(l.price) + ' ‚Ç¨' : '‚Äî'}</td>
      <td>${l.surface || '‚Äî'}</td>
      <td class="pm2">${pm2 ? pm2 + ' ‚Ç¨' : '‚Äî'}</td>
      <td>${l.rooms || '‚Äî'}</td>
      <td>${dist}</td>
      <td><a class="al" href="${l.url}" target="_blank" title="${l.title}">${trunc(l.title, 55)}</a></td>
      <td style="color:#94a3b8;font-size:.72rem">${l.created_at ? l.created_at.slice(0,10) : '‚Äî'}</td>
      <td style="color:#10b981;font-size:.72rem">${l.available_from || ''}</td>
      <td style="text-align:center">${l.notified ? '‚úÖ' : ''}</td>`;
    tb.appendChild(row);
  });

  if (dt) dt.destroy();
  dt = $('#tbl').DataTable({
    paging: true, pageLength: 25, ordering: true, order: [[3,'asc']], searching: true,
    language: { url: 'https://cdn.datatables.net/plug-ins/1.13.8/i18n/fr-FR.json' },
    columnDefs: [{ orderable: false, targets: [0, 8] }]
  });

  document.getElementById('chk-all').checked = false;
  const cnt = document.getElementById('cnt');
  if (cnt) cnt.textContent = `${data.length} annonce${data.length > 1 ? 's' : ''}`;
}

function applyFilters() {
  const site  = document.getElementById('f-site').value;
  const city  = document.getElementById('f-city').value;
  const pmin  = parseFloat(document.getElementById('f-pmin').value) || 0;
  const pmax  = parseFloat(document.getElementById('f-pmax').value) || Infinity;
  const smin  = parseFloat(document.getElementById('f-smin').value) || 0;
  const rooms = document.getElementById('f-rooms').value;
  filtered = ALL.filter(l => {
    if (site && l.site !== site)   return false;
    if (city && l.city !== city)   return false;
    if (l.price < pmin || l.price > pmax) return false;
    if (smin > 0 && l.surface > 0 && l.surface < smin) return false;
    if (rooms) {
      if (rooms === '4') { if (l.rooms < 4) return false; }
      else               { if (l.rooms && l.rooms != +rooms) return false; }
    }
    return true;
  });
  render(filtered);
}

function resetFilters() {
  ['f-site','f-city','f-rooms'].forEach(id => document.getElementById(id).value = '');
  ['f-pmin','f-pmax','f-smin'].forEach(id => document.getElementById(id).value = '');
  filtered = [...ALL];
  render(filtered);
}

function togCmp(id, chk) {
  chk.checked ? cmpSet.add(id) : cmpSet.delete(id);
  document.getElementById('cmp-n').textContent = cmpSet.size;
  document.getElementById('cmp-btn').style.display = cmpSet.size >= 2 ? '' : 'none';
}
function toggleAll(chk) {
  document.querySelectorAll('.cchk').forEach(c => {
    c.checked = chk.checked;
    chk.checked ? cmpSet.add(+c.value) : cmpSet.delete(+c.value);
  });
  document.getElementById('cmp-n').textContent = cmpSet.size;
  document.getElementById('cmp-btn').style.display = cmpSet.size >= 2 ? '' : 'none';
}
function openCompare() {
  const sel = ALL.filter(l => cmpSet.has(l.id));
  if (sel.length < 2) return;
  const fields = [
    ['Site',     l => l.site || '‚Äî'],
    ['Ville',    l => l.city || '‚Äî'],
    ['Prix',     l => l.price ? fmt(l.price) + ' ‚Ç¨' : '‚Äî'],
    ['Surface',  l => l.surface ? l.surface + ' m¬≤' : '‚Äî'],
    ['‚Ç¨/m¬≤',    l => (l.price && l.surface) ? Math.round(l.price / l.surface * 10) / 10 + ' ‚Ç¨' : '‚Äî'],
    ['Pi√®ces',   l => l.rooms || '‚Äî'],
    ['Distance', l => l.distance_km != null ? l.distance_km.toFixed(1) + ' km' : '‚Äî'],
    ['Notifi√©',  l => l.notified ? '‚úÖ' : '‚ùå'],
    ['Date',     l => l.created_at ? l.created_at.slice(0,10) : '‚Äî'],
    ['Lien',     l => `<a href="${l.url}" target="_blank" class="al">Voir ‚Üí</a>`],
  ];
  let html = '<div style="overflow-x:auto"><table class="table table-sm table-bordered">'
           + '<thead class="table-dark"><tr><th>Crit√®re</th>';
  sel.forEach(l => { html += `<th>${trunc(l.title, 30)}</th>`; });
  html += '</tr></thead><tbody>';
  fields.forEach(([lb, fn]) => {
    html += `<tr><td class="fw-semibold">${lb}</td>`;
    sel.forEach(l => { html += `<td>${fn(l)}</td>`; });
    html += '</tr>';
  });
  html += '</tbody></table></div>';
  document.getElementById('cmp-body').innerHTML = html;
  new bootstrap.Modal(document.getElementById('cmp-modal')).show();
}

// ‚îÄ‚îÄ Graphiques Chart.js ‚îÄ‚îÄ
window.addEventListener('DOMContentLoaded', () => {
  render(ALL);

  // Donut ‚Äî r√©partition par ville (top 8)
  new Chart(document.getElementById('cSites'), {
    type: 'doughnut',
    data: {
      labels: ["Luxembourg-Belair", "Bertrange", "Luxembourg-Kirchberg", "Luxembourg", "Luxembourg-Gare", "Luxembourg-Centre ville", "Senningerberg", "Bridel"],
      datasets: [{ data: [5, 4, 3, 3, 2, 2, 2, 2], backgroundColor: ["#3b82f6", "#10b981", "#f59e0b", "#ef4444", "#8b5cf6", "#ec4899", "#06b6d4", "#84cc16"],
        borderWidth: 2, borderColor: '#f1f5f9' }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { position: 'bottom', labels: { font: { size: 11 }, boxWidth: 12, padding: 8 } }
      }
    }
  });

  // Barre horizontale ‚Äî top 10 villes (clic ‚Üí filtre tableau)
  const CHART_CITIES = ["Strassen", "Luxembourg-Weimershof", "Bridel", "Senningerberg", "Luxembourg-Centre ville", "Luxembourg-Gare", "Luxembourg", "Luxembourg-Kirchberg", "Bertrange", "Luxembourg-Belair"];
  new Chart(document.getElementById('cCities'), {
    type: 'bar',
    data: {
      labels: CHART_CITIES,
      datasets: [{
        data: [2, 2, 2, 2, 2, 2, 3, 3, 4, 5],
        backgroundColor: '#3b82f6bb',
        borderColor: '#3b82f6',
        borderWidth: 1, borderRadius: 4
      }]
    },
    options: {
      indexAxis: 'y', responsive: true,
      plugins: { legend: { display: false } },
      onHover: (e, el) => {
        e.native.target.style.cursor = el.length ? 'pointer' : 'default';
      },
      onClick: (e, el) => {
        if (!el.length) return;
        const city = CHART_CITIES[el[0].index];
        const sel  = document.getElementById('f-city');
        if (sel.value === city) {
          sel.value = '';
          resetFilters();
        } else {
          sel.value = city;
          applyFilters();
        }
        // Scroll doux vers le tableau
        document.querySelector('.card.mb-4').scrollIntoView({ behavior: 'smooth', block: 'start' });
      },
      scales: {
        x: { beginAtZero: true, ticks: { font: { size: 10 } } },
        y: { ticks: { font: { size: 10 } } }
      }
    }
  });

  // Barre ‚Äî distribution prix
  new Chart(document.getElementById('cPrices'), {
    type: 'bar',
    data: {
      labels: ['< 1 500 ‚Ç¨', '1 500‚Äì2 000 ‚Ç¨', '2 000‚Äì2 500 ‚Ç¨', '2 500‚Äì3 000 ‚Ç¨', '> 3 000 ‚Ç¨'],
      datasets: [{
        data: [0, 2, 29, 25, 0],
        backgroundColor: ['#10b981bb','#3b82f6bb','#f59e0bbb','#ef4444bb','#8b5cf6bb'],
        borderColor:     ['#10b981',  '#3b82f6',  '#f59e0b',  '#ef4444',  '#8b5cf6'],
        borderWidth: 1, borderRadius: 4
      }]
    },
    options: {
      responsive: true,
      plugins: { legend: { display: false } },
      scales: {
        y: { beginAtZero: true, ticks: { font: { size: 10 }, stepSize: 1 } },
        x: { ticks: { font: { size: 10 } } }
      }
    }
  });
});

if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./sw.js').catch(() => {});
}
</script>
</body>
</html>